{% extends "base.html" %}

{# CSS desta página #}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/perfil.css') }}">
{% endblock %}

{# Conteúdo #}
{% block content %}
<div class="main-content">
  <div class="perfil-container">
    <h2>Meu Perfil</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash-message {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" enctype="multipart/form-data" class="perfil-form">
      <div class="perfil-avatar">
        <!-- Clicar na imagem abre o input de arquivo -->
        <label for="avatar" class="avatar-label">
          <img
            id="avatarPreview"
            src="{% if usuario.avatar %}
                   {{ url_for('static', filename=usuario.avatar) }}
                 {% else %}
                   {{ url_for('static', filename='images/avatar.png') }}
                 {% endif %}"
            alt="Avatar do Usuário">
        </label>
        <input type="file" id="avatar" name="avatar" accept="image/*" class="form-control" hidden>
      </div>

      <div>
        <label for="nome">Nome</label>
        <input type="text" id="nome" name="nome" value="{{ usuario.nome }}" required>
      </div>

      <div>
        <label for="sobrenome">Sobrenome</label>
        <input type="text" id="sobrenome" name="sobrenome" value="{{ usuario.sobrenome }}" required>
      </div>

      <div>
        <label for="email">E-mail</label>
        <input type="email" id="email" name="email" value="{{ usuario.email }}" required>
      </div>

      <div>
        <label for="data_nasc">Data de Nascimento</label>
        <input type="date" id="data_nasc" name="data_nasc" value="{{ usuario.data_nasc }}">
      </div>

      <div>
        <label for="senha_atual">Senha Antiga</label>
        <input type="password" id="senha_atual" name="senha_atual" placeholder="Digite sua senha atual">
      </div>

      <div>
        <label for="senha">Nova Senha</label>
        <input type="password" id="senha" name="senha" placeholder="Deixe em branco para não alterar">
      </div>

      <button type="submit">Salvar Alterações</button>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='javascript/perfil.js') }}"></script>
{% endblock %}
